---
const features = [
  {
    name: 'Shake & Sort',
    desc: 'Hit one button and watch your tabs arrange themselves into tidy topic groups. Like a snow globe, but for your browser.',
    rotate: '-2deg',
    accent: 'burnt-orange',
    illustration: 'sort',
  },
  {
    name: 'Find Anything',
    desc: 'Fuzzy search across every tab in every window. That tab you swore you closed? Still there. Found in under a second.',
    rotate: '1.5deg',
    accent: 'retro-purple',
    illustration: 'search',
  },
  {
    name: 'Clean House',
    desc: 'Duplicates, stale tabs, forgotten pages from three days ago\u2014flagged and ready to close. One click to reclaim your RAM and your sanity.',
    rotate: '-1deg',
    accent: 'mustard',
    illustration: 'clean',
  },
  {
    name: 'Drag Between Windows',
    desc: 'Move tabs between windows right from the sidebar. No detaching, no hunting, no window juggling.',
    rotate: '2.5deg',
    accent: 'burnt-orange',
    illustration: 'drag',
  },
  {
    name: 'Gets Smarter',
    desc: 'Rearrange a group and Tabulous remembers. The more you use it, the better it gets at organizing tabs your way.',
    rotate: '-1.5deg',
    accent: 'retro-purple',
    illustration: 'learn',
  },
]

const accentBorder: Record<string, string> = {
  'burnt-orange': 'border-l-burnt-orange',
  'retro-purple': 'border-l-retro-purple',
  'mustard': 'border-l-mustard',
}
---

<section class="relative pt-28 pb-16 px-8 bg-dark-brown text-cream overflow-hidden">
  <!-- Grain texture -->
  <div class="absolute inset-0 opacity-[0.12] mix-blend-soft-light pointer-events-none" style="background-image: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)'/%3E%3C/svg%3E&quot;); background-size: 512px 512px;"></div>

  <div class="relative z-1 max-w-3xl mx-auto">
    <h2 class="reveal font-heading font-black text-[clamp(2rem,5vw,3rem)] text-center mb-20">
      Everything Chrome forgot to include.
    </h2>

    <div class="flex flex-col md:flex-row gap-6 md:-mx-4">
      {/* Left column: cards 0, 2, 4 */}
      <div class="flex-1 flex flex-col gap-6">
        {features.filter((_, i) => i % 2 === 0).map((f, ci) => {
          const i = ci * 2;
          return (
            <div
              class={`reveal reveal-delay-${(i % 4) + 1} bg-cream text-dark-brown rounded-xl p-7 border-l-[6px] ${accentBorder[f.accent]} shadow-[6px_6px_0_rgba(0,0,0,0.25)] transition-all duration-200 hover:rotate-0! hover:scale-[1.03] hover:shadow-[8px_8px_0_rgba(0,0,0,0.3)] hover:z-10`}
              style={`transform: rotate(${f.rotate});`}
            >
              <div class="flex items-start gap-5">
                <div class="flex-shrink-0 w-16 h-16 mt-1">
                  {f.illustration === 'sort' && (
                    <svg viewBox="0 0 64 64" fill="none" class="w-full h-full">
                      <rect x="8" y="28" width="20" height="28" rx="3" fill="var(--color-burnt-orange)" stroke="var(--color-dark-brown)" stroke-width="2" transform="rotate(-15 18 42)" />
                      <rect x="22" y="24" width="20" height="28" rx="3" fill="var(--color-mustard)" stroke="var(--color-dark-brown)" stroke-width="2" transform="rotate(5 32 38)" />
                      <rect x="34" y="22" width="20" height="28" rx="3" fill="var(--color-retro-purple)" stroke="var(--color-dark-brown)" stroke-width="2" transform="rotate(12 44 36)" />
                      <path d="M14,12 L16,8 L18,12 L22,14 L18,16 L16,20 L14,16 L10,14Z" fill="var(--color-mustard)" />
                      <path d="M42,6 L43,3 L44,6 L47,7 L44,8 L43,11 L42,8 L39,7Z" fill="var(--color-burnt-orange)" />
                    </svg>
                  )}
                  {f.illustration === 'clean' && (
                    <svg viewBox="0 0 64 64" fill="none" class="w-full h-full">
                      <rect x="6" y="38" width="28" height="6" rx="2" fill="var(--color-burnt-orange)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <rect x="6" y="48" width="28" height="6" rx="2" fill="var(--color-retro-purple)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <rect x="8" y="18" width="24" height="6" rx="2" fill="var(--color-medium-brown)" stroke="var(--color-dark-brown)" stroke-width="1.5" opacity="0.3" />
                      <line x1="10" y1="21" x2="30" y2="21" stroke="var(--color-dark-brown)" stroke-width="1.5" opacity="0.4" />
                      <rect x="8" y="28" width="24" height="6" rx="2" fill="var(--color-medium-brown)" stroke="var(--color-dark-brown)" stroke-width="1.5" opacity="0.2" />
                      <line x1="10" y1="31" x2="30" y2="31" stroke="var(--color-dark-brown)" stroke-width="1.5" opacity="0.3" />
                      <path d="M46,12 L49,6 L52,12 L58,15 L52,18 L49,24 L46,18 L40,15Z" fill="var(--color-mustard)" />
                      <path d="M42,36 L43.5,32 L45,36 L49,37.5 L45,39 L43.5,43 L42,39 L38,37.5Z" fill="var(--color-burnt-orange)" />
                      <path d="M54,28 L55,25.5 L56,28 L58.5,29 L56,30 L55,32.5 L54,30 L51.5,29Z" fill="var(--color-mustard)" />
                    </svg>
                  )}
                  {f.illustration === 'learn' && (
                    <svg viewBox="0 0 64 64" fill="none" class="w-full h-full">
                      <circle cx="32" cy="24" r="16" fill="var(--color-mustard)" stroke="var(--color-dark-brown)" stroke-width="2" />
                      <rect x="26" y="38" width="12" height="4" rx="2" fill="var(--color-warm-white)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <rect x="28" y="42" width="8" height="3" rx="1.5" fill="var(--color-warm-white)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <path d="M28,28 C28,20 36,20 36,28" stroke="var(--color-dark-brown)" stroke-width="1.5" fill="none" />
                      <line x1="32" y1="28" x2="32" y2="34" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <line x1="32" y1="2" x2="32" y2="6" stroke="var(--color-burnt-orange)" stroke-width="2" stroke-linecap="round" />
                      <line x1="50" y1="10" x2="47" y2="13" stroke="var(--color-burnt-orange)" stroke-width="2" stroke-linecap="round" />
                      <line x1="14" y1="10" x2="17" y2="13" stroke="var(--color-burnt-orange)" stroke-width="2" stroke-linecap="round" />
                      <line x1="56" y1="24" x2="52" y2="24" stroke="var(--color-burnt-orange)" stroke-width="2" stroke-linecap="round" />
                      <line x1="8" y1="24" x2="12" y2="24" stroke="var(--color-burnt-orange)" stroke-width="2" stroke-linecap="round" />
                      <path d="M52,38 L53.5,34 L55,38 L59,39.5 L55,41 L53.5,45 L52,41 L48,39.5Z" fill="var(--color-retro-purple)" />
                    </svg>
                  )}
                </div>
                <div class="flex-1 min-w-0">
                  <h3 class="font-heading font-black text-2xl mb-2">{f.name}</h3>
                  <p class="text-[0.95rem] leading-relaxed text-medium-brown">{f.desc}</p>
                </div>
              </div>
            </div>
          );
        })}
      </div>
      {/* Right column: cards 1, 3 â€” offset down to balance the 3-card left column */}
      <div class="flex-1 flex flex-col gap-6 md:mt-20">
        {features.filter((_, i) => i % 2 === 1).map((f, ci) => {
          const i = ci * 2 + 1;
          return (
            <div
              class={`reveal reveal-delay-${(i % 4) + 1} bg-cream text-dark-brown rounded-xl p-7 border-l-[6px] ${accentBorder[f.accent]} shadow-[6px_6px_0_rgba(0,0,0,0.25)] transition-all duration-200 hover:rotate-0! hover:scale-[1.03] hover:shadow-[8px_8px_0_rgba(0,0,0,0.3)] hover:z-10`}
              style={`transform: rotate(${f.rotate});`}
            >
              <div class="flex items-start gap-5">
                <div class="flex-shrink-0 w-16 h-16 mt-1">
                  {f.illustration === 'search' && (
                    <svg viewBox="0 0 64 64" fill="none" class="w-full h-full">
                      <rect x="6" y="30" width="32" height="6" rx="2" fill="var(--color-cream)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <rect x="6" y="40" width="32" height="6" rx="2" fill="var(--color-cream)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <rect x="6" y="50" width="32" height="6" rx="2" fill="var(--color-cream)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <rect x="6" y="30" width="32" height="6" rx="2" fill="var(--color-mustard)" stroke="var(--color-dark-brown)" stroke-width="1.5" />
                      <circle cx="44" cy="22" r="14" stroke="var(--color-retro-purple)" stroke-width="3" fill="var(--color-retro-purple)" fill-opacity="0.15" />
                      <line x1="54" y1="32" x2="62" y2="42" stroke="var(--color-retro-purple)" stroke-width="3" stroke-linecap="round" />
                    </svg>
                  )}
                  {f.illustration === 'drag' && (
                    <svg viewBox="0 0 64 64" fill="none" class="w-full h-full">
                      <rect x="2" y="14" width="28" height="30" rx="3" fill="var(--color-warm-white)" stroke="var(--color-dark-brown)" stroke-width="2" />
                      <rect x="2" y="14" width="28" height="8" rx="3" fill="var(--color-burnt-orange)" stroke="var(--color-dark-brown)" stroke-width="2" />
                      <rect x="34" y="20" width="28" height="34" rx="3" fill="var(--color-warm-white)" stroke="var(--color-dark-brown)" stroke-width="2" />
                      <rect x="34" y="20" width="28" height="8" rx="3" fill="var(--color-retro-purple)" stroke="var(--color-dark-brown)" stroke-width="2" />
                      <rect x="33" y="37" width="18" height="6" rx="2" fill="var(--color-dark-brown)" opacity="0.12" transform="rotate(-3 42 40)" />
                      <rect x="31" y="34" width="18" height="6" rx="2" fill="var(--color-mustard)" stroke="var(--color-dark-brown)" stroke-width="1.5" transform="rotate(-3 40 37)" />
                    </svg>
                  )}
                </div>
                <div class="flex-1 min-w-0">
                  <h3 class="font-heading font-black text-2xl mb-2">{f.name}</h3>
                  <p class="text-[0.95rem] leading-relaxed text-medium-brown">{f.desc}</p>
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </div>

    <div class="reveal mt-16 text-center">
      <div class="w-20 h-[3px] bg-mustard mx-auto mb-8 rounded-full"></div>
      <p class="font-heading font-medium italic text-[clamp(1.1rem,2.5vw,1.5rem)] leading-relaxed text-cream/90 max-w-lg mx-auto">
        Tabulous doesn't force structure on you. It suggests, you decide.
        Your tabs, your way. Just a little more fabulous.
      </p>
    </div>
  </div>
</section>
